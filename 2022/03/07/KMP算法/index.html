<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/bollnh/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">


    <link rel="dns-prefetch" href="https://cdn1.lncld.net"/>




    <link rel="dns-prefetch" href="https://cdn1.lncld.net"/>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net"/>



    <link rel="dns-prefetch" href="https://hm.baidu.com"/>



    <link rel="dns-prefetch" href="https://fonts.googleapis.com"/>





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            KMP算法 | 
        
        Garry&#39;s Blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.svg">
    <link rel="icon" href="/img/favicon.svg">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content="">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?NKhlKQkXw/c66TR5p4wO+w==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Garry&#39;s Blog">
    <meta name="msapplication-starturl" content="https://garryx.com/2022/03/07/KMP%E7%AE%97%E6%B3%95/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Garry&#39;s Blog">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.svg">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://garryx.com/2022/03/07/KMP%E7%AE%97%E6%B3%95/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="KMP算法 | Garry&#39;s Blog">
    <meta property="og:image" content="/img/favicon.svg">
    <meta property="og:description" content="">
    

    
        <meta property="article:published_time" content="Mon Mar 07 2022 15:38:42 GMT+0800">
        <meta property="article:modified_time" content="Tue Jul 05 2022 23:00:54 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://garryx.com/2022/03/07/KMP%E7%AE%97%E6%B3%95/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://garryx.com/2022/03/07/KMP%E7%AE%97%E6%B3%95/index.html",
    "headline": "KMP算法",
    "datePublished": "Mon Mar 07 2022 15:38:42 GMT+0800",
    "dateModified": "Tue Jul 05 2022 23:00:54 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Garry Xu",
        "image": {
            "@type": "ImageObject",
            "url": "/img/person.jpg"
        },
        "description": "写作使人精确"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Garry&#39;s Blog",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.svg"
        }
    },
    "keywords": "",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
        <script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?11c4725b193a666d23428aa1f1005776';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
    
    

    <!-- Custom Head -->
    

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3"><span class="post-toc-number">1.</span> <span class="post-toc-text">通俗理解</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0"><span class="post-toc-number">2.</span> <span class="post-toc-text">算法实现</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                KMP算法
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/person.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Garry Xu</strong>
        <span>3月 07, 2022</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=KMP算法&url=https://garryx.com/2022/03/07/KMP%E7%AE%97%E6%B3%95/index.html&pic=https://garryx.com/img/favicon.svg&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=KMP算法&url=https://garryx.com/2022/03/07/KMP%E7%AE%97%E6%B3%95/index.html&via=Garry Xu" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://garryx.com/2022/03/07/KMP%E7%AE%97%E6%B3%95/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://garryx.com/2022/03/07/KMP%E7%AE%97%E6%B3%95/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <blockquote>
<p>以下笔记来自阅读：Knuth D E , Morris J H , Pratt V R . Fast Pattern
Matching in Strings[J]. Siam Journal on Computing, 1977,
6(2):323-350.</p>
</blockquote>
<p>    文本编辑器软件经常需要在一串字符中查找以匹配特定的模式，这些模式也是一串字符，我们有时需要查找到所有匹配的位置，也有时候，仅仅需要获取第一个匹配位置。例如，c
a t e n a r y 包含模式 t e n 。</p>
<p>    最直接的查找方式是在文本的每一个位置开始查找，如果没有匹配，就放弃该次查找。但是这种方式可能非常低效，举个例子，比如我们需要查找
a a a a a a a a a a a a a a b 中出现的 a a a a a a a b。模式是
a<sup>n</sup>b, 文本是 a<sup>2n</sup>b，我们将需要进行 (n+1)<sup>2</sup>
次比较。另外，这种传统处理方式在遍历输入字符串的时候需要回退，这将给我们频繁用到的缓存操作带来麻烦（想像从磁盘读取数据到内存缓存）。</p>
<p>    本文将描述一种模式匹配算法，该算法可以在 <em>O</em>(m + n)
时间内，从长度为n的字符串中查找长度为m的模式字符串的所有出现位置，并且不需要回退输入文本。算法仅需要占用
<em>O</em>(m) 的额外内存空间，并且复杂度和文本使用的字符表大小无关。</p>
<p>    我们首先来从一个低效但是容易理解的角度理解算法。</p>
<hr />
<h3 id="通俗理解"><strong>通俗理解</strong></h3>
<p>    算法背后的想法从这个角度更会容易理解：想像我们将模式字符串放置在输入字符串之上，
并且按照某种方式向右滑动模式字符串。比如：从 b a b c b a b c a b c a a b
c a b c a b c a c a b c 中查找 a b c a b c a c a
b。首先，我们将模式字符串放到最左侧，准备匹配输入字符串的第一个字符：<br />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a b c a b c a c a b</span><br><span class="line">b a b c b a b c a b c a a b c a b c a b c a c a b c</span><br><span class="line">↑</span><br></pre></td></tr></table></figure>     箭头指向当前的输入字符，由于其指向 b，与 a
不匹配，我们向右滑动一位，移动到下一个输入字符：<br />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  a b c a b c a c a b</span><br><span class="line">b a b c b a b c a b c a a b c a b c a b c a c a b c</span><br><span class="line">  ↑</span><br></pre></td></tr></table></figure></p>
<p>    现在我们匹配了一个字符，因此我们的模式字符串保持不动，继续扫描。很快，我们发现了另一个不匹配的字符：<br />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  a b c a b c a c a b </span><br><span class="line">b a b c b a b c a b c a a b c a b c a b c a c a b c</span><br><span class="line">        ↑</span><br></pre></td></tr></table></figure></p>
<p>    此时我们已经匹配了除第四个字符以外的前三个字符，所以我们知道，输入字符串的最后四个字符是
a b c x
(x≠a)。<strong>我们不需要记录之前扫描过的字符串，因为我们目前在模式字符串中的位置就提供了重建这些字符串的足够信息</strong>。在上述的例子中，无论
x 是什么字符，只要不是 a,
我们可以直接将模式字符串右移4位，因为一位、两位、三位的移动都不可能匹配字符串。<br />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">          a b c a b c a c a b </span><br><span class="line">b a b c b a b c a b c a a b c a b c a b c a c a b c</span><br><span class="line">          ↑</span><br></pre></td></tr></table></figure>
    很快我们遇到另一个部分匹配，这次在模式字符串的第八个字符。<br />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">          a b c a b c a c a b </span><br><span class="line">b a b c b a b c a b c a a b c a b c a b c a c a b c</span><br><span class="line">                        ↑</span><br></pre></td></tr></table></figure>     现在，我们知道输入字符串的的最后八个字符是：a b c a b
c a x (x≠c)，模式字符串因此应该右移三位。 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">                a b c a b c a c a b </span><br><span class="line">b a b c b a b c a b c a a b c a b c a b c a c a b c</span><br><span class="line">                        ↑</span><br></pre></td></tr></table></figure>
    我们尝试重新匹配，但是这次也失败了，因此我们再次将模式字符串右移四位。继续扫描，我们在第八位遇到了不匹配的情况。
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">                        a b c a b c a c a b </span><br><span class="line">b a b c b a b c a b c a a b c a b c a b c a c a b c</span><br><span class="line">                                      ↑</span><br></pre></td></tr></table></figure>
    再次右移三位；这次我们找到了第一个匹配位置，我们最终完成了匹配。
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">                              a b c a b c a c a b </span><br><span class="line">b a b c b a b c a b c a a b c a b c a b c a c a b c</span><br><span class="line">                                                ↑</span><br></pre></td></tr></table></figure>
    上述一步一步的描述表明，当我们在模式字符串的第<em>j</em>个字符
<em>pattern[j]</em>
发现不匹配时，如果有一个辅助表能够刚好告诉我们如何滑动模式字符串，模式匹配的过程将变得非常高效。让
<em>next[j]</em>
代表在发生不匹配时模式字符串需要检查的下一个字符位置。因此在不匹配时，相对于输入文本，我们可以向右滑动模式字符串
<em>j - next[j]</em> 位。下述表格列出来了正确的值： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">         j = 1 2 3 4 5 6 7 8 9 10</span><br><span class="line"></span><br><span class="line">pattern[j] = a b c a b c a c a b</span><br><span class="line"></span><br><span class="line">   next[j] = 0 1 1 0 1 1 0 5 0 1 </span><br><span class="line"></span><br><span class="line">注意： next[j] = 0 代表将模式字符串直接滑过当前的输入字符</span><br></pre></td></tr></table></figure>
    我们后面将讨论如何计算 next[j]; 幸运的是，计算过程很简单，只需要
<em>O</em>(m) 步骤。</p>
<p>    在每步的扫描过程中，我们要么移动输入文本的指针，要么移动模式字符串，两者都最多能移动
<em>n</em> 次；因此，在构建 <em>next</em> 表后，最多需要 <em>2n</em>
步。当然模式字符串并没有真正的移动，只需要维护好指针 <em>j</em>
即可。</p>
<hr />
<h3 id="算法实现"><strong>算法实现</strong></h3>
<p>    模式匹配的过程可以描述为如下形式：<br />
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">place pattern at left;</span><br><span class="line"><span class="keyword">while</span> pattern <span class="keyword">not</span> fully matched</span><br><span class="line">      <span class="keyword">and</span> text <span class="keyword">not</span> exhausted <span class="keyword">do</span></span><br><span class="line">      begin</span><br><span class="line">      <span class="keyword">while</span> pattern character differs from</span><br><span class="line">            current text character</span><br><span class="line">            <span class="keyword">do</span> shift pattern appropriately;</span><br><span class="line">            advance to next character of text;</span><br><span class="line">      end;</span><br></pre></td></tr></table></figure>     便于描述，让我们假设输入文本用数组 <em>text[1:n]</em>
描述，模式字符串用 <em>pattern[1:m]</em> 描述。我们假设 <em>m &gt;
0</em> ，也就是模式字符串不为空。<em>k</em> 和 <em>j</em>
是整数变量，<em>text[k]</em> 是当前的文本字符，<em>pattern[j]</em>
是当前模式字符串字符；模式字符串目前放置在输入文本 <em>p + 1</em> 到
<em>p + m</em> 的位置上，<em>k = p +
j</em>。于是，上面的描述，可以简化为： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">j := k := <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> j ≦ m <span class="keyword">and</span> k ≦ n <span class="keyword">do</span></span><br><span class="line">    begin</span><br><span class="line">    <span class="keyword">while</span> j &gt; <span class="number">0</span> <span class="keyword">and</span> text[k] ≠ pattern[j]</span><br><span class="line">        <span class="keyword">do</span> j := next[j];</span><br><span class="line">    k := k + <span class="number">1</span>; j := j + <span class="number">1</span>;</span><br><span class="line">    end;</span><br></pre></td></tr></table></figure>
    如果最后程序结束 <em>j &gt;
m</em>，则找到了模式字符串的第一个匹配位置，<em>k - m</em> 到 <em>k -
1</em>。但是如果 <em>j ≦ m</em>，
表明输入文本已经遍历完，但是没有发现匹配。这个程序有一个有趣的特性，内部循环的
<em>j := next[j];</em> 操作执行不如外面的 <em>k := k + 1</em>
频繁；实际上，内部循环一般情况都执行的不频繁，因为外面的文本指针移动要比模式字符串的右移频繁的多。</p>
<p>    为了严格证明上述程序的正确性，使用如下不变关系（invariant
relation）：<em>Let p = k - j</em>
(恰好位于和模式字符串对齐的前一个文本字符)，我们有 <strong><em>text[p +
i] = pattern[i] for 1 ≦ i &lt; j</em></strong> (当j &gt;
0时，我们已经匹配了前面的j - 1个字符); 但是对于 <em>0 ≦ t &lt; p</em> 有
<strong><em>text[t + i] ≠ pattern[i] for some i, 1 ≦ i ≦
m</em></strong>（在 <em>p</em> 之前不可能有对模式的完全匹配）。</p>
<p>    程序要想正确是建立在能够计算 <em>next</em>
表之上的，只有这样，我们才能在做了 <em>j := next[j]</em>
的变换之后，依然保持上面的关系成立。现在，让我们看看如何计算
<em>next</em> 表。当程序设置 <em>j := next[j]</em>，我们知道 <em>j &gt;
0</em>， 输入文本包含 <em>text[k]</em> 的最后 <em>j</em> 个字符是：
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pattern[1] ... pattern[j - 1] x ,  x ≠ pattern[j]</span><br></pre></td></tr></table></figure>
我们想要的是找到最少的右移步数，并且有可能匹配当前的输入字符。换句话说，我们想要找到最大的
<em>i</em> （<em>i &lt; j</em>) 能够使得最后的 <em>i</em> 个输入字符是：
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pattern[1] ... pattern[i] x , pattern[i] ≠ pattern[j]</span><br></pre></td></tr></table></figure> （如果没有这样的 <em>i</em>，<em>next[j] =
0</em>）。按照如上 <em>next[j]</em> 的定义，很容易可以得到：<em>text[t +
1]...text[k] ≠ pattern[1]...pattern[k - t], for k - j ≦ t &lt; k -
next[j]</em>。因此前述的不变关系得到了保持，我们程序的正确性也得到了保证。</p>
<p>    现在让我们来解决一直推迟的一个问题，如何计算 <em>next[j]</em>。
如果在定义 <em>next[j]</em> 时我们不要求 <em>pattern[i] ≠
pattern[j]</em>，这个问题将变得简单一些，因此我们先优先考虑这个简化的场景。
让 <em>f[i]</em> 代表满足如下条件的最大的 <em>i (i &lt; j)</em>:
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pattern[1]...pattern[i - 1] = pattern[j - i + 1]..pattern[j - 1]</span><br></pre></td></tr></table></figure> 因为这个条件当 <em>i = 1</em> 时总是满足，因此对于 <em>j
&gt; 1</em> 有 <em>f[j] ≥ 1</em>。按照惯例，我们让 <em>f[1] =
0</em>。示例1中的模式字符串有如下的 <em>f</em> 表： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">         j = 1 2 3 4 5 6 7 8 9 10 </span><br><span class="line">pattern[j] = a b c a b c a c a b</span><br><span class="line">      f[j] = 0 1 1 1 2 3 4 5 1 2</span><br></pre></td></tr></table></figure>
    如果 <em>pattern[j] = pattern[f[j]]</em>，那么 <em>f[j + 1] = f[j] +
1</em>； 如果两者不相同，我们可以将 <em>text</em> 替换为
<em>pattern</em> 复用上述的模式匹配算法计算 <em>f[j +1]</em>
。（注意计算 <em>f[j]</em>
问题与模式匹配算法在不变关系上的共同之处。我们的程序计算最大的小于<em>k</em>
的 <em>j</em>，满足 <em>pattern[1]..pattern[j -1] = text[k - j +
1]..text[k -1]</em>，所以我们可以将之前的算法用在当前的问题上）。假设
<em>f[j]</em> 和 <em>next[1]...next[j-1]</em>
都已经计算完成，下面的程序将计算 <em>f[j + 1]</em> ： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t := f[j];</span><br><span class="line"><span class="keyword">while</span> t &gt; <span class="number">0</span> <span class="keyword">and</span> patter[j] ≠ pattern[t] </span><br><span class="line">    <span class="keyword">do</span> t := next[t];</span><br><span class="line">f[j + <span class="number">1</span>] := t + <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
程序的正确性如前面的分析；可以想像两份模式字符串的拷贝，一个相对于另一个向右侧滑动。例如，假设在上面的例子中我们已经计算得出
<em>f(8) = 5</em>， 让我们看看如何计算 <em>f(9)</em>。 此时视图如下：
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">      a b c a b c a c a b</span><br><span class="line">a b c a b c a c a b</span><br><span class="line">              ↑</span><br></pre></td></tr></table></figure> 由于 <em>pattern[8] ≠ b</em>,
我们把上面的拷贝字符串右移，在移动的过程中，我们已经知道最近扫描过的字符串是
<em>a b c a x</em> 且 <em>x ≠ b</em>, <em>next</em>
表已经告诉我们下一步要要移动，于是得到： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">              a b c a b c a c a b</span><br><span class="line">a b c a b c a c a b</span><br><span class="line">              ↑</span><br></pre></td></tr></table></figure>
我们又一次遇到了不匹配的情况，下一步的移动使 <em>t = 0</em>，
因此我们得到 <em>f[9] = 1</em>。</p>
<p>    当我们知道如何计算 <em>f[j]</em>，离计算 <em>next[j]</em>
也就一步之遥了。对比两者的定义我们可以得到，对于 <em>j &gt; 1</em>:</p>
<p><span class="math display">\[
next[j]=
\begin{equation*}
\left\{
  \begin{aligned}
  f[j],\qquad&amp;if pattern[j] ≠ pattern[f[j]] \\
  next[f[j]],\qquad&amp;if pattern[j] = pattern[f[j]]
  \end{aligned}
  \right.
\end{equation*}
\]</span></p>
<p>因此我们可以用如下的算法计算 <em>next</em> 表，其中也不需要存储
<em>f[j]</em>: <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">j := <span class="number">1</span>; t := <span class="number">0</span>; next[<span class="number">1</span>] := <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> j &lt; m <span class="keyword">do</span></span><br><span class="line">    begin comment t = f[j]</span><br><span class="line">        <span class="keyword">while</span> t &gt; <span class="number">0</span> <span class="keyword">and</span> pattern[j] != pattern[t] </span><br><span class="line">            <span class="keyword">do</span> t := next[t]</span><br><span class="line">        t := t + <span class="number">1</span>; j := j + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> pattern[j] = pattern[t]</span><br><span class="line">        then next[j] := next[t];</span><br><span class="line">        <span class="keyword">else</span> next[j] := t;</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>     这个程序的时间复杂度是 <em>O(m)</em>，
原因和之前模式匹配算法 <em>O(n)</em>的一样：内部循环中的<em>t :=
next[t]</em> 永远将上层的模式字符串向右移动，因此最多能够执行 <em>m</em>
次。（另一个不同的证明复杂度与 <em>m</em>
线性相关的方法是变量t从0开始，增加了 <em>m - 1</em>
次的1；t值永远都是正值，因此降低t值的这个操作 <em>t := next[t]</em>，
最多也就能执行 <em>m - 1</em> 次）</p>
<p>    来总结一下，文本字符串可以使用两种思想来实现高效搜索：我们可以提前计算好需要的右移步数，这样当第
<em>j</em>
位发生不匹配时，我们可以按照计算结果进行移动；另外，对右移步数的计算是很高效的，同样可以应用模式匹配算法的思想：右移模式匹配字符串自己。</p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <div id="comment" style='padding:10px;' class="vcomment"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
    var GUEST_INFO = ['nick','mail','link'];
    var guest_info = 'nick,mail,link'.split(',').filter(function(item){
        return GUEST_INFO.indexOf(item) > -1
    });
    var notify = 'false' === 'true';
    var verify = 'false' === 'true';
    new Valine({
        el: '.vcomment',
        notify: notify,
        verify: verify,
        appId: "s2eHqXywwedp3daCPBNbPuh1-gzGzoHsz",
        appKey: "pGeyqGOCCeFFrOlUwGveRpL4",
        placeholder: "来聊聊吧",
        pageSize:'10',
        avatar:'identicon',
        lang:'zh-cn',
        guest_info: guest_info
    });
</script>


                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2022/03/14/%E6%8C%87%E4%BB%A4%E9%9B%86%E6%9E%B6%E6%9E%84/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2022/02/22/%E7%A1%AC%E4%BB%B6%E8%99%9A%E6%8B%9F%E5%8C%96/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/person.jpg" alt="Garry Xu's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        garry.x@outlook.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: garry.x@outlook.com" target="_blank" title="联系">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        联系
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2022/08/">八月 2022<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2022/05/">五月 2022<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2022/03/">三月 2022<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2022/02/">二月 2022<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/02/">二月 2020<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/10/">十月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/09/">九月 2017<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/%E4%BC%9A%E8%AE%AE%E8%AE%BA%E6%96%87/">会议论文<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/">体系结构<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/%E7%AE%97%E6%B3%95/">算法<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/%E8%99%9A%E6%8B%9F%E5%8C%96/">虚拟化<span class="sidebar_archives-count">6</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/about" title="关于我">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于我
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/garry-x" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;Garry's Blog
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/bollnh/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?Bn9UzEm8RrBSxqyZB0zPjA==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>



    
        <script>lsloader.load("sm_js","/js/smoothscroll.js?lOy/ACj5suSNi7ZVFVbpFQ==", true)</script>
    







   





<!-- UC Browser Compatible -->
<!-- <script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('
<link rel="stylesheet" href="/css/uc.css">
');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script> -->

<!-- Import prettify js  -->


    
        <script>lsloader.load("hanabi","/js/hanabi-browser-bundle.js?Pki5+pzkluqu53g+ouMWpA==", true)</script>
    


<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
        
        
        HanabiBrowser.start('pre code',true);
    
</script>

<!-- MathJax Load-->

    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
        tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno",skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']},
        TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
        messageStyle: "none"
    });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

    <script src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>




<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 2015;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/bollnh/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
